<script language="javascript">
var auth_level = <% getIndex("auth_level"); %>;
var username = "<% getInfo("username"); %>";

var wlan_idx = <% getIndex("wlan_idx"); %>;
var both_freq = <% getIndex("both_freq"); %>;
var curr_ssid = <% getIndex("curr_ssid"); %>;

var wifi_supported = <% getIndex("wifi_supported"); %>;
var wifi_certificated = <% getIndex("wifi_certificated"); %>;
var errorBuf = "<% getInfo("errorBuf"); %>";
var jump_security = 0;
var langstat =  "<% getIndex("telus_langstat"); %>";
var cur_lang = "";
var tContent_top_lft = new Array(); 
var aContent_top_lft = new Array();

window.onload = function(){
	//alert(auth_level + "--" + username);
	if(langstat==""||langstat=="NULL")
		langstat = "0";
	if(langstat=="0")
		get_browser_lang();
	else
		cur_lang = langstat;

        if((cur_lang == "2")&&(errorBuf == "Invalid wep-key value!"))
        {
            errorBuf = "ClÃ© WEP est invalide";
        }

        if((cur_lang == "2")&&(errorBuf == "Error! Comment length too long."))
        {
            errorBuf = "Commentaire trop long";
        }
		
	var location_url = window.location.href;
	if(location_url.indexOf("wcb_main.html") != -1)
		document.getElementById("top_status").className = "selected";
	else if(location_url.indexOf("wl_") != -1)
	{
		document.getElementById("top_wireless").className = "selected";
		
	}
	else if(location_url.indexOf("moca_") != -1)
		document.getElementById("top_moca").className = "selected";
	else if(location_url.indexOf("adv_") != -1)
	{
		if(auth_level != 3)
		{
			document.getElementById("left_upgrade").style.display = "none";
			document.getElementById("left_restore").style.display = "none";
			document.getElementById("left_tr69").style.display = "none";
			document.getElementById("left_localssh").style.display = "none";
			if(location_url.indexOf("adv_upgrade.html") != -1||location_url.indexOf("adv_swap.html") != -1||location_url.indexOf("adv_tr69.html") != -1||location_url.indexOf("adv_localssh.html") != -1)
			goThere('adv_manage.html');
		}
		else if(auth_level == 3)
		{
			document.getElementById("left_password").style.display = "none";
			if(location_url.indexOf("adv_password.html") != -1)
				goThere('adv_manage.html');
		}
			
		document.getElementById("top_advanced").className = "selected";	
	}

	var top_username = document.getElementById("top_username");
	if(top_username != undefined)
		top_username.innerHTML = username;
	
	if(auth_level != 3)
	{
		var left_basicsettings = document.getElementById("left_basicsettings");
		var left_ssid = document.getElementById("left_ssid");	
		var left_advanced = document.getElementById("left_advanced");			

		if(left_basicsettings != undefined)
			left_basicsettings.style.display = "none";
				
		//if(left_ssid != undefined)
		//left_ssid.style.display = "none";

		if(left_advanced != undefined)
			left_advanced.style.display = "none";
	}
	else
	{
		document.getElementById("top_chanpass_li").style.display = "none";	
	}

/**
	if(wifi_supported == 0)
	{
		var top_wireless_li = document.getElementById("top_wireless_li");

		if(top_wireless_li != undefined)
			top_wireless_li.style.display = "none";		
	}
**/
	var urlArray = (window.location.href).split("?");
	if(urlArray[1] != undefined)
	{
		if(urlArray[1] == "e=1")
		{
			pop_up(errorBuf);		
		}
		else
		{
			var parameters = urlArray[1].split("&");
			if(parameters.length > 0)
			{
				for(var i = 0; i < parameters.length; i++)
				{
					var paramArray = parameters[i].split("=");
					if(paramArray[0] == "wlan")
						wlan_idx = paramArray[1];
					else if(paramArray[0] == "vwlan")
						curr_ssid = paramArray[1];

					if(paramArray[0] != "t")
						jump_security = 1;
				}
			}
		}
	}
	
	doLoad();	
};

function get_browser_lang()
{
	 var Browser_Agent=window.navigator.userAgent;
	 if(Browser_Agent.indexOf("MSIE")!=-1){
	 	if(window.navigator.browserLanguage.indexOf("fr")!=-1)
			cur_lang = "2";
		else
			cur_lang = "1";
	 }
	 else{//firefox opera safari
	 	if(window.navigator.language.indexOf("fr")!=-1)
			cur_lang = "2";
		else
			cur_lang = "1";
	 }
}
</script>
